<% if player.is_a? Array
  i, player = player[1], player[0]
else
  i = nil
end -%>
<tr class="<%= cycle('row1','row2') -%>">
  <% if not i.nil? -%><td><%= "#{i}" -%></td><% end -%>
  <td>
    <%= player_link ? (link_to player.name, {:anchor => "player_#{player.id}"}) : player.name %> <%= "(#{player.year})" if player.year != "" and not player.year.nil? and $tournament.includes_years? -%>
    <%= link_to player.team.name,{:action => 'team',:id => player.team},{:class=>"secondary_name"} if team_name %>
  </td>
  <td class="number"><%= fmt(player.gp) -%></td>
	<% if $tournament.timed? %>
  <td class="number"><%= fmt(player.tuh) -%></td>
	<% end %>
  <% for type in types -%>
  <td class="number"><%= player.answered(type) -%></td>
  <% end -%>
  <td class="number"><%= player.points -%></td>
  <td class="number"><%= fmt(player.ppg) -%></td>
  <% if $tournament.timed? %>
  <td class="number"><%= fmt(player.pp20) -%></td>
  <% end %>
  <td class="number"><%= fmt(player.tu_neg) -%></td>
  <td class="number"><%= fmt(player.neg20) -%></td>
</tr>
<% player.save_if_changed %>
